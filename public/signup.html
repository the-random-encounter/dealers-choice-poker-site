<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up</title>
  <link rel="stylesheet" href="/css/styles.css">
  <script>
    function validateForm() {
      const username = document.forms["signupForm"]["username"].value;
      const password = document.forms["signupForm"]["password"].value;
      const passconfirm = document.forms["signupForm"]["passconfirm"].value;
      const email = document.forms["signupForm"]["email"].value;
      const dob = document.forms["signupForm"]["dob"].value;
      const spinner = document.getElementById("spinner");
      const errorElement = document.getElementById("error-message");
      errorElement.innerHTML = "";

      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      if (username === "" || password === "") {
        errorElement.innerHTML = "Username and Password must be filled out";
        return false;
      }
      if (password.length < 6) {
        errorElement.innerHTML = "Password must be at least 6 characters long";
        return false;
      }
      if (password !== passconfirm) {
        errorElement.innerHTML = "Passwords do not match";
        return false;
      }
      if (!emailPattern.test(email)) {
        errorElement.innerHTML = "Please enter a valid email address";
        return false;
      }
      if (dob === "") {
        errorElement.innerHTML = "Please select a valid date of birth";
        return false;
      }
      spinner.style.display = "block"; // Show the spinner
      return true;
    }
  </script>
</head>
<body>

<div id="signup" class="signup">
  <h2>Sign Up</h2>
  <form name="signupForm" action="/signup" method="post" class="signup" onsubmit="return validateForm()">
    <label for="username">Username:</label>
    <input type="text" name="username" id="username" placeholder="Username" class="signup" required autocomplete="on" autofocus>
    <label for="displayName">Display Name:</label>
    <input type="text" name="displayName" id="displayName" placeholder="Display Name" class="signup" required>
    <label for="password">Password:</label>
    <input type="password" name="password" id="password" placeholder="Password" class="signup" required>
    <label for="passconfirm">Confirm Password:</label>
    <input type="password" name="passconfirm" id="passconfirm" placeholder="Confirm Password" class="signup" required>
    <label for="email">Email:</label>
    <input type="email" name="email" id="email" placeholder="Email" class="signup" required autocomplete="on">
    <label for="dob">Date of Birth:</label>
    <input type="date" name="dob" id="dob" class="signup" required min="1940-01-01" max="2006-12-31">
    <button type="submit" class="signup">Sign Up</button>
  </form>
  <div id="error-message" style="color: red;"></div>
</div>
</body>
</html>
